<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
*{ margin:0; padding:0;}
#progressBox{ width:300px; height:40px; border:1px solid #C8C8C8; background:white; position:relative; margin:200px auto;}
#progressBar{ position:absolute; left:0; top:0; z-index:2; height:40px; width:100%; line-height:40px; color:white; text-align:center; font-size:20px; font-weight:bold; font-family:Georgia; clip:rect(0px, 0, 40px, 0px); background:#00A1F5;}
#progressText { position:absolute; left:0; top:0; z-index:1; width:100%; height:40px; line-height:40px; color:black; text-align:center; font-size:20px; font-weight:bold; font-family:Georgia;}
</style>

</head>

<body>
<div id="progressBox">
    <div id="progressBar">0%</div>
    <div id="progressText">0%</div>
</div>
<div id="div2" style="display:none;">
	
    <img src="http://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E5%88%9B%E6%84%8F%E6%91%84%E5%BD%B1&step_word=&pn=3&spn=0&di=0&pi=&rn=1&tn=baiduimagedetail&is=&istype=2&ie=utf-8&oe=utf-8&in=&cl=2&lm=-1&st=-1&cs=1324787875%2C507234010&os=420164138%2C1078599496&simid=&adpicid=0&ln=1000&fr=&fmq=1469189015371_R&fm=&ic=0&s=undefined&se=&sme=&tab=0&width=&height=&face=undefined&ist=&jit=&cg=&bdtype=-1&oriquery=&objurl=http%3A%2F%2Fc11.eoemarket.com%2Fupload%2Fapps%2F2013%2F0420%2F131329%2Fscreenshots%2F21bf3021-aeef-4dbf-fd5c-6dd7c24cb1f3.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bj5j4w6hjp_z%26e3Bv54AzdH3Ff5upAzdH3F8n8ndl_z%26e3Bip4s&gsm=0&rpstart=0&rpnum=0" />
    <img src="http://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E5%88%9B%E6%84%8F%E6%91%84%E5%BD%B1&step_word=&pn=3&spn=0&di=0&pi=&rn=1&tn=baiduimagedetail&is=&istype=2&ie=utf-8&oe=utf-8&in=&cl=2&lm=-1&st=-1&cs=1324787875%2C507234010&os=420164138%2C1078599496&simid=&adpicid=0&ln=1000&fr=&fmq=1469189015371_R&fm=&ic=0&s=undefined&se=&sme=&tab=0&width=&height=&face=undefined&ist=&jit=&cg=&bdtype=-1&oriquery=&objurl=http%3A%2F%2Fc11.eoemarket.com%2Fupload%2Fapps%2F2013%2F0420%2F131329%2Fscreenshots%2F21bf3021-aeef-4dbf-fd5c-6dd7c24cb1f3.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bj5j4w6hjp_z%26e3Bv54AzdH3Ff5upAzdH3F8n8ndl_z%26e3Bip4s&gsm=0&rpstart=0&rpnum=0" />
    <img src="http://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E5%88%9B%E6%84%8F%E6%91%84%E5%BD%B1&step_word=&pn=11&spn=0&di=25285845420&pi=&rn=1&tn=baiduimagedetail&is=&istype=2&ie=utf-8&oe=utf-8&in=&cl=2&lm=-1&st=-1&cs=775947704%2C345231781&os=2189006630%2C3636191441&simid=3463796741%2C463680594&adpicid=0&ln=1000&fr=&fmq=1469189015371_R&fm=&ic=0&s=undefined&se=&sme=&tab=0&width=&height=&face=undefined&ist=&jit=&cg=&bdtype=0&oriquery=&objurl=http%3A%2F%2Fpic25.nipic.com%2F20121112%2F9211_140221458131_2.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bgtrtv_z%26e3Bv54AzdH3Ffi5oAzdH3F8AzdH3F00AzdH3F08aldd8hdcdlu9bj_z%26e3Bip4s&gsm=0&rpstart=0&rpnum=0" />
    <img src="http://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E5%88%9B%E6%84%8F%E6%91%84%E5%BD%B1&step_word=&pn=11&spn=0&di=25285845420&pi=&rn=1&tn=baiduimagedetail&is=&istype=2&ie=utf-8&oe=utf-8&in=&cl=2&lm=-1&st=-1&cs=775947704%2C345231781&os=2189006630%2C3636191441&simid=3463796741%2C463680594&adpicid=0&ln=1000&fr=&fmq=1469189015371_R&fm=&ic=0&s=undefined&se=&sme=&tab=0&width=&height=&face=undefined&ist=&jit=&cg=&bdtype=0&oriquery=&objurl=http%3A%2F%2Fpic25.nipic.com%2F20121112%2F9211_140221458131_2.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bgtrtv_z%26e3Bv54AzdH3Ffi5oAzdH3F8AzdH3F00AzdH3F08aldd8hdcdlu9bj_z%26e3Bip4s&gsm=0&rpstart=0&rpnum=0" />
    <img src="http://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E5%88%9B%E6%84%8F%E6%91%84%E5%BD%B1&step_word=&pn=11&spn=0&di=25285845420&pi=&rn=1&tn=baiduimagedetail&is=&istype=2&ie=utf-8&oe=utf-8&in=&cl=2&lm=-1&st=-1&cs=775947704%2C345231781&os=2189006630%2C3636191441&simid=3463796741%2C463680594&adpicid=0&ln=1000&fr=&fmq=1469189015371_R&fm=&ic=0&s=undefined&se=&sme=&tab=0&width=&height=&face=undefined&ist=&jit=&cg=&bdtype=0&oriquery=&objurl=http%3A%2F%2Fpic25.nipic.com%2F20121112%2F9211_140221458131_2.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bgtrtv_z%26e3Bv54AzdH3Ffi5oAzdH3F8AzdH3F00AzdH3F08aldd8hdcdlu9bj_z%26e3Bip4s&gsm=0&rpstart=0&rpnum=0" />
    <img src="http://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E5%88%9B%E6%84%8F%E6%91%84%E5%BD%B1&step_word=&pn=11&spn=0&di=25285845420&pi=&rn=1&tn=baiduimagedetail&is=&istype=2&ie=utf-8&oe=utf-8&in=&cl=2&lm=-1&st=-1&cs=775947704%2C345231781&os=2189006630%2C3636191441&simid=3463796741%2C463680594&adpicid=0&ln=1000&fr=&fmq=1469189015371_R&fm=&ic=0&s=undefined&se=&sme=&tab=0&width=&height=&face=undefined&ist=&jit=&cg=&bdtype=0&oriquery=&objurl=http%3A%2F%2Fpic25.nipic.com%2F20121112%2F9211_140221458131_2.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Fooo_z%26e3Bgtrtv_z%26e3Bv54AzdH3Ffi5oAzdH3F8AzdH3F00AzdH3F08aldd8hdcdlu9bj_z%26e3Bip4s&gsm=0&rpstart=0&rpnum=0" />
   
</div>
<script>

var oDiv2 = document.getElementById('div2');
var aImg = oDiv2.getElementsByTagName('img');
var oDiv1 = document.getElementById('progressBox');
var iNow = 0;
// 必须在服务器环境下操作
for(var i=0;i<aImg.length;i++){
	(function(i){
		// 创建一个对象
		var yImg = new Image();
		
		yImg.onload = function(){
			iNow++;
			
			progressFn(parseInt(iNow/aImg.length * 100));
			
			if(iNow==aImg.length){
				oDiv2.style.display = 'block';
				oDiv1.style.display = 'none';
			}
		};
		
		yImg.src = aImg[i].src;
	})(i);
}

function progressFn(cent){
		
	var oDiv1 = document.getElementById('progressBox');
	var oDiv2 = document.getElementById('progressBar');
	var oDiv3 = document.getElementById('progressText');
	
	var allWidth = parseInt(getStyle(oDiv1,'width'));
	
	oDiv2.innerHTML = cent + '%';
	oDiv3.innerHTML = cent + '%';
	oDiv2.style.clip = 'rect(0px, '+ cent * (allWidth/100) +'px, 40px, 0px)';
	
	function getStyle(obj,attr){
		if(obj.currentStyle){
			return obj.currentStyle[attr];
		} 
		else{
			return getComputedStyle(obj)[attr];
		}
	}
	
}
	

</script>
</body>
</html>
